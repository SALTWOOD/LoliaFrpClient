<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="LoliaFrpClient.Controls.CreateTunnelDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:LoliaFrpClient.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="创建隧道"
    PrimaryButtonClick="OnPrimaryButtonClick"
    PrimaryButtonText="创建"
    CloseButtonText="取消"
    DefaultButton="Primary">

    <ScrollViewer MaxHeight="500">
        <StackPanel Spacing="12" Padding="8">
            <!-- 隧道类型 -->
            <StackPanel Spacing="4">
                <TextBlock Text="隧道类型" FontWeight="SemiBold"/>
                <ComboBox x:Name="TypeComboBox"
                          PlaceholderText="选择隧道类型"
                          SelectionChanged="OnTypeSelectionChanged">
                    <ComboBoxItem Content="TCP" Tag="tcp"/>
                    <ComboBoxItem Content="UDP" Tag="udp"/>
                    <ComboBoxItem Content="HTTP" Tag="http"/>
                    <ComboBoxItem Content="HTTPS" Tag="https"/>
                </ComboBox>
            </StackPanel>

            <!-- 节点选择 -->
            <StackPanel Spacing="4">
                <TextBlock Text="节点" FontWeight="SemiBold"/>
                <ComboBox x:Name="NodeComboBox"
                          PlaceholderText="选择节点"
                          SelectionChanged="OnNodeSelectionChanged"
                          DisplayMemberPath="DisplayName"/>
            </StackPanel>

            <!-- 本地IP -->
            <StackPanel Spacing="4">
                <TextBlock Text="本地IP" FontWeight="SemiBold"/>
                <TextBox x:Name="LocalIpTextBox"
                         PlaceholderText="例如: 127.0.0.1"
                         Text="127.0.0.1"/>
            </StackPanel>

            <!-- 本地端口 -->
            <StackPanel Spacing="4">
                <TextBlock Text="本地端口" FontWeight="SemiBold"/>
                <NumberBox x:Name="LocalPortNumberBox"
                           PlaceholderText="例如: 8080"
                           Minimum="1"
                           Maximum="65535"
                           SpinButtonPlacementMode="Compact"/>
            </StackPanel>

            <!-- 远程端口 -->
            <StackPanel Spacing="4">
                <TextBlock Text="远程端口" FontWeight="SemiBold"/>
                <NumberBox x:Name="RemotePortNumberBox"
                           PlaceholderText="例如: 8080"
                           Minimum="1"
                           Maximum="65535"
                           SpinButtonPlacementMode="Compact"/>
            </StackPanel>

            <!-- 自定义域名 (仅HTTP/HTTPS显示) -->
            <StackPanel x:Name="CustomDomainPanel" Spacing="4" Visibility="Collapsed">
                <TextBlock Text="自定义域名" FontWeight="SemiBold"/>
                <TextBox x:Name="CustomDomainTextBox"
                         PlaceholderText="例如: example.com"/>
            </StackPanel>

            <!-- 备注 -->
            <StackPanel Spacing="4">
                <TextBlock Text="备注" FontWeight="SemiBold"/>
                <TextBox x:Name="RemarkTextBox"
                         PlaceholderText="例如: 我的网站隧道"
                         TextWrapping="Wrap"
                         AcceptsReturn="True"
                         Height="60"/>
            </StackPanel>

            <!-- 节点信息 -->
            <Border x:Name="NodeInfoBorder"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    CornerRadius="8"
                    Padding="12"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    Visibility="Collapsed">
                <StackPanel Spacing="8">
                    <TextBlock Text="节点信息" FontWeight="SemiBold"/>
                    <TextBlock x:Name="NodeNameTextBlock" Text=""/>
                    <TextBlock x:Name="NodeStatusTextBlock" Text=""/>
                    <TextBlock x:Name="NodeProtocolsTextBlock" Text=""/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</ContentDialog>
