<?xml version="1.0" encoding="utf-8"?>

<Page
    x:Class="LoliaFrpClient.Pages.Settings"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <ScrollViewer x:Name="MainScrollViewer"
                  VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled"
                  Padding="20,20,20,40">
        <StackPanel x:Name="RootStackPanel" Spacing="16" MaxWidth="800">

            <!-- Account Settings Card -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    CornerRadius="8"
                    Padding="20"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1">
                <StackPanel Spacing="12">
                    <TextBlock Text="账户设置"
                               FontSize="20"
                               FontWeight="SemiBold" />
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <Button x:Name="LoginButton"
                                Content="登录"
                                Click="LoginButton_Click"
                                HorizontalAlignment="Stretch"
                                MinWidth="100" />
                        <Button x:Name="LogoutButton"
                                Content="退出登录"
                                Click="LogoutButton_Click"
                                HorizontalAlignment="Stretch"
                                MinWidth="100" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Login Status Card -->
            <Border x:Name="LoginStatusCard"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    CornerRadius="8"
                    Padding="20"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    Visibility="Collapsed">
                <StackPanel Spacing="12">
                    <TextBlock Text="登录状态"
                               FontSize="20"
                               FontWeight="SemiBold" />
                    <TextBlock x:Name="LoginStatusText"
                               Text="未登录"
                               FontSize="14" />
                </StackPanel>
            </Border>

            <!-- Client Update Settings Card -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    CornerRadius="8"
                    Padding="20"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1">
                <StackPanel Spacing="16">
                    <TextBlock Text="客户端更新"
                               FontSize="20"
                               FontWeight="SemiBold" />

                    <!-- Current Client Version -->
                    <Grid ColumnSpacing="12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0"
                                   Text="当前版本:"
                                   VerticalAlignment="Center"
                                   FontSize="14" />
                        <TextBlock Grid.Column="1"
                                   x:Name="ClientCurrentVersionText"
                                   Text="获取中..."
                                   VerticalAlignment="Center"
                                   FontSize="14"
                                   FontWeight="SemiBold" />
                    </Grid>

                    <!-- Latest Client Version -->
                    <Grid ColumnSpacing="12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0"
                                   Text="最新版本:"
                                   VerticalAlignment="Center"
                                   FontSize="14" />
                        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                            <TextBlock x:Name="ClientLatestVersionText"
                                       Text="未检查"
                                       VerticalAlignment="Center"
                                       FontSize="14"
                                       FontWeight="SemiBold" />
                            <Button x:Name="CheckClientUpdateButton"
                                    Content="检查更新"
                                    Click="CheckClientUpdateButton_Click"
                                    FontSize="12"
                                    Padding="8,4" />
                        </StackPanel>
                    </Grid>

                    <!-- Auto Check Toggle -->
                    <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                        <ToggleSwitch x:Name="AutoCheckUpdateToggle"
                                      Header="启动时自动检查更新"
                                      IsOn="True"
                                      Toggled="AutoCheckUpdateToggle_Toggled" />
                    </StackPanel>

                    <!-- Client Update Status -->
                    <TextBlock x:Name="ClientUpdateStatusText"
                               Text=""
                               FontSize="12"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               Visibility="Collapsed" />

                    <!-- Client Update Button -->
                    <Button x:Name="ClientUpdateButton"
                            Content="前往下载"
                            Click="ClientUpdateButton_Click"
                            Visibility="Collapsed"
                            MinWidth="120" />
                </StackPanel>
            </Border>

            <!-- GitHub Mirror Settings Card -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    CornerRadius="8"
                    Padding="20"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1">
                <StackPanel Spacing="12">
                    <TextBlock Text="下载设置"
                               FontSize="20"
                               FontWeight="SemiBold" />

                    <TextBlock Text="GitHub 镜像源："
                               FontSize="14"
                               VerticalAlignment="Center" />

                    <RadioButtons x:Name="GitHubMirrorRadioButtons"
                                  SelectionChanged="GitHubMirrorRadioButtons_SelectionChanged">
                        <RadioButton Content="直接访问 (github.com)"
                                     Tag="0"
                                     IsChecked="True" />
                        <RadioButton Content="镜像源 (cdn.akaere.online/github.com)"
                                     Tag="1" />
                    </RadioButtons>
                </StackPanel>
            </Border>

            <!-- Core Version Management Card -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    CornerRadius="8"
                    Padding="20"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1">
                <StackPanel Spacing="16">
                    <TextBlock Text="核心版本管理 (frpc)"
                               FontSize="20"
                               FontWeight="SemiBold" />

                    <!-- Version Info -->
                    <StackPanel Spacing="12">
                        <Grid ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0"
                                       Text="当前版本:"
                                       VerticalAlignment="Center"
                                       FontSize="14" />
                            <TextBlock Grid.Column="1"
                                       x:Name="CurrentVersionText"
                                       Text="未安装"
                                       VerticalAlignment="Center"
                                       FontSize="14"
                                       FontWeight="SemiBold" />
                        </Grid>

                        <Grid ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0"
                                       Text="最新版本:"
                                       VerticalAlignment="Center"
                                       FontSize="14" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                <TextBlock x:Name="LatestVersionText"
                                           Text="检查中..."
                                           VerticalAlignment="Center"
                                           FontSize="14"
                                           FontWeight="SemiBold" />
                                <Button x:Name="RefreshVersionButton"
                                        Content="刷新"
                                        Click="RefreshVersionButton_Click"
                                        FontSize="12"
                                        Padding="8,4" />
                            </StackPanel>
                        </Grid>

                        <Grid ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0"
                                       Text="安装状态:"
                                       VerticalAlignment="Center"
                                       FontSize="14" />
                            <TextBlock Grid.Column="1"
                                       x:Name="InstallStatusText"
                                       Text="未安装"
                                       VerticalAlignment="Center"
                                       FontSize="14" />
                        </Grid>

                        <Grid ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0"
                                       Text="进程状态:"
                                       VerticalAlignment="Center"
                                       FontSize="14" />
                            <TextBlock Grid.Column="1"
                                       x:Name="ProcessStatusText"
                                       Text="未运行"
                                       VerticalAlignment="Center"
                                       FontSize="14" />
                        </Grid>
                    </StackPanel>

                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <Button x:Name="InstallButton"
                                Content="安装"
                                Click="InstallButton_Click"
                                MinWidth="100" />
                        <Button x:Name="UpdateButton"
                                Content="更新"
                                Click="UpdateButton_Click"
                                MinWidth="100"
                                IsEnabled="False" />
                        <Button x:Name="UninstallButton"
                                Content="卸载"
                                Click="UninstallButton_Click"
                                MinWidth="100"
                                IsEnabled="False" />
                    </StackPanel>

                    <!-- Progress Bar -->
                    <ProgressBar x:Name="DownloadProgressBar"
                                 Visibility="Collapsed"
                                 Height="8" />

                    <!-- Progress Text -->
                    <TextBlock x:Name="ProgressText"
                               Text=""
                               Visibility="Collapsed"
                               FontSize="12"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</Page>